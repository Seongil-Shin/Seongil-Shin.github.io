---
title: 반정규화
author: 신성일
date: 2022-02-25 22:00:00 +0900
categories: [study, database]
tags: []
---

## **반정규화**

시스템의 성능 향상, 개발 및 운영의 편의성을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로 의도적으로 정규화 원칙을 위배하는 행위.

과도한 반정규화는 성능 저하를 불러일으킴.

-  시스셈의 성능과 관리효율성은 증가하지만, 데이터의 일관성 및 정합성을 저하될 수 있음.
   -  따라서 사전에 데이터의 일관성 및 정합성을 우선할지, 데이터베이스의 성능과 단순화를 우선으로 할지 결정해야함

**방법**

-  테이블 통합, 테이블 분할, 중복 테이블 추가, 중복 속성 추가

<br/>

### **테이블 통합**

두개의 테이블이 조인되는 경우가 많아 하나의 테이블로 합쳐 사용하는 것이 성능향상에 도움이 될 경우 수행한다.

-  두개의 테이블에서 발생하는 프로세스가 동일하게 자주 처리되는 경우, 두 개의 테이블을 이용하여 항상 조회를 수행하는 경우 테이블 통합을 고려.
-  1:1 관계 테이블 통합, 1:N 관계 테이블 통합, 슈퍼타입/서브타입 테이블 통합이 있음.
-  고려사항
   -  데이터 검색은 간편하지만, 레코드 증가로 인해 처리량 증가
   -  데이터 통합으로 인해 입력, 수정, 삭제 규칙이 복잡해질 수 있음
   -  Not Null, Default, Check 등의 제약조건을 설계하기 어려움

<br/>

### **테이블 분할**

테이블을 수직 또는 수평으로 분할하는 것

**수평분할**

-  레코드를 기준으로 테이블을 분할
-  레코드 별로 사용빈도의 차이가 큰 경우 사용빈도에 따라 테이블을 분할함

**수직 분할**

-  하나의 테이블에 속성이 너무 많을 경우 속성을 기준으로 테이블을 분할함
-  종류
   -  갱신 위주의 속성 분할 : 갱신이 자주 일어나는 속성들을 수직 분할하여 이용
   -  자주 조회되는 속성분할 : 자주 조회되는 속성이 극 히 일부일 경우 그 속성들을 수직분할하여 사용
   -  크기가 큰 속성 분할 : 이미지나 2GB 이상 저장도리 수 있는 텍스트 형식으로 된 속성들을 수직분할함.
   -  보안을 적용해야하는 속성 분할

**고려사항**

-  기본키의 유일성 관리가 어려워짐
-  데이터의 양이 적거나 사용빈도가 낮으면 굳이 해야하나 고려
-  데이터 검색에 중점을 두어 테이블 분할 여부 결정

<br/>

### **중복 테이블 추가**

여러 테이블에서 데이터를 추출해서 사용해야하거나 다른 서버에 저장된 테이블을 이용해야하는 경우 중복 테이블을 추가하여 작업의 효율성을 향상 시킬 수 있음.

-  중복 테이블을 추가하는 경우
   -  정규화로 인해 수행 속도가 느려지는 경우
   -  많은 범위의 데이터를 자주 처리해야하는 경우
   -  특정 범위의 데이터만 자주 처리하는 경우
   -  처리 범위를 줄이지 않고는 수행 속도를 개선할 수 없는 경우
-  중복 테이블을 추가하는 방법
   -  집계 테이블 추가 : 집계 데이터를 위한 테이블을 생성하고, 각 원본 테이블에 트리거를 설정하여 사용. 트리거 오버헤드에 유의해야함
   -  진행 테이블 추가 : 이력 관리 등의 목적으로 추가하는 테이블로, 적절한 데이터 양의 유지와 활용도를 높이기 위해 기본키를 적절히 설정.
   -  특정 부분만을 포함하는 테이블의 추가 : 데이터가 많은 테이블의 특정 부분만을 사용하는 경우, 해당 부분만으로 새로운 테이블을 생성

<br/>

### **중복속성 추가**

조인해서 데이터를 처리할 떄, 데이터를 조회하는 경로를 단축하기 위해 자주 사용하는 속성을 하나 더 추가하는 것.

중복 속성을 추가하면 데이터의 무결성 확보가 어렵고, 디스크 공간이 추가로 필요하다.

-  중복속성을 추가하는 경우
   -  조인이 자주 발생하는 속성
   -  접근 경로가 복잡한 속성
   -  액세스의 조건으로 자주 사용되는 속성
   -  기본키의 형태가 적절하지 않거나 여러개의 속성으로 구성된 경우
-  고려사항
   -  테이블 중복과 속성의 중복 고려
   -  데이터 일관성 및 무결성에 유의
   -  SQL 그룹 함수를 이용하여 처리할 수 있어야함.
   -  저장 공간의 지나친 낭비 고려

<br/>

<br/>

## **출처**

https://lipcoder.tistory.com/337
