<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="노드 스터디 4장" /><meta name="author" content="신성일" /><meta property="og:locale" content="ko" /><meta name="description" content="http 모듈로 서버 만들기" /><meta property="og:description" content="http 모듈로 서버 만들기" /><link rel="canonical" href="https://seongil-shin.github.io/posts/node_ch4/" /><meta property="og:url" content="https://seongil-shin.github.io/posts/node_ch4/" /><meta property="og:site_name" content="디피의 개발일지" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-06T14:07:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="노드 스터디 4장" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"신성일"},"dateModified":"2023-05-30T21:53:32+09:00","datePublished":"2021-05-06T14:07:00+09:00","description":"http 모듈로 서버 만들기","headline":"노드 스터디 4장","mainEntityOfPage":{"@type":"WebPage","@id":"https://seongil-shin.github.io/posts/node_ch4/"},"url":"https://seongil-shin.github.io/posts/node_ch4/"}</script><title>노드 스터디 4장 | 디피의 개발일지</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-HC9W0NGRV0"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-HC9W0NGRV0'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">디피의 개발일지</a></div><div class="site-subtitle font-italic">개인 학습 및 프로젝트 기록</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Seongil-Shin" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['callmeshin75','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/%EC%84%B1%EC%9D%BC-%EC%8B%A0-a9411b237/" aria-label="linkedin" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>노드 스터디 4장</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>노드 스터디 4장</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> 신성일 </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, May 6, 2021, 2:07 PM +0900" prep="on" > May 6, 2021 <i class="unloaded">2021-05-06T14:07:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, May 30, 2023, 9:53 PM +0900" prefix="Updated " > May 30, 2023 <i class="unloaded">2023-05-30T21:53:32+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2103 words">11 min</span></div></div><div class="post-content"><h1 id="http-모듈로-서버-만들기">http 모듈로 서버 만들기</h1><h2 id="41-요청과-응답-이해하기">4.1 요청과 응답 이해하기</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>- req : 요청에 관한 정보
- res : 응답에 관한 정보.
    - .writeHead    : 헤더. 응답에 대한 정보를 기록하는 메서드.
        - 첫번째 인수 :  코드
        - 두번째 인수 :  응답에 대한 정보를 알림.
    - .write        : 본문(Body)
        - 첫번째 인수 - 클라이언트로 보낼 데이터. 여러번 호출해서 데이터를 여러개 보내도 됨.
    - .end          : 응답을 종료함. 여기에도 데이터를 넣어서 보낼 수 있음.
- 서버가 실행되면, 해당 포트번호에서 요청이 오기를 기다림
- listen 메소드 : 포트번호와 콜백함수를 넣음.
- 이벤트 리스너 : 서버에 이벤트리스너를 등록할 수 있음. ex) server.on('listening', () =&gt; {}) 으로 함.
    - 'listening' : 연결됐을때 발생함. listen 메소드의 콜백함수 대신에 사용해도 됨.
    - 'error'   : 서버에 에러가 발생했을 때 발생.
</pre></table></code></div></div><h3 id="41-기타">4.1 기타</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>- 코드
    - 2xx : 성공
    - 3xx : 리다이렉션
    - 4xx : 요청 오류
    - 5xx : 서버오류
- 포트번호 : 80번을 사용하면 주소에서 포트를 생략할 수 있음. https 일경우 443번
    - 실제로 배포할 땐 80번 혹흥 443번 포트를 사용
- 응답은 무조건 보내야한다. 아니면 클라이언트는 하염없이 기다리게 됨.
</pre></table></code></div></div><h2 id="42-rest-와-라우팅-사용하기">4.2 REST 와 라우팅 사용하기</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>- REST : REpresentational State Transfer. 서버의 자원을 정의하고 자원에 대한 주소를 지정하는 방법. 일종의 약속
    - 주소뿐만 아니라 GET, POST, PUT, PATCH, DELETE, OPTIONS 등의 메서드와 함께 사용됨.
    - GET : 자원을 가져올 때. 요청의 본문에 데이터를 넣지 않음. 쿼리 데이터로 보냄.
        - 브라우저에서 캐싱할 수 있으므로 같은 주소로 보낼때 성능이 좋아짐.
    - post : 자원을 등록할 때. 요청의 본문에 새로 등록할 데이터를 넣어보냄
    - PUT : 서버의 자원을 요청에 들어있는 자원으로 치환할때 사용. 본문에 데이터를 넣음
    - PATCH : 서버의 자원의 일부만 수정하고자할 때 사용. 본문에 데이터를 넣음
    - DELETE : 서버의 자원을 삭제하고자 할 때 사용. 데이터를 넣지 않음
    - OPTIONS : 요청을 하기 전에 통신 옵션을 설명하기 위해 사용.
    - 만약 로그인 같은 애매한 동작이 있다면 그냥 POST 하면 된다.

- 이렇게 REST 방식으로 하게 되면, 클라이언트에 구애받지 않고 사용할 수 있어서 좋다.

- RESTful 서버구조
</pre></table></code></div></div><div class="table-wrapper"><table><thead><tr><th>HTTP 메서드<th>주소<th>역할<tbody><tr><td>GET<td>/<td>restFront.html 파일 제공<tr><td>GET<td>/about<td>about.html 파일 제공<tr><td>GET<td>/users<td>사용자 목록 제공<tr><td>GET<td>기타<td>기타정적파일제공<tr><td>POST<td>/user<td>사용자 등록<tr><td>PUT<td>/user/사용자id<td>해당 id의 사용자 수정<tr><td>DELETE<td>/user/사용자id<td>해당 id의 사용자 제거\</table></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>- 라우팅
    - req.method 로 GET, POST 등 HTTP 요청 메소드를 구분할 수 있음
    - req.url 로 요청한 url을 구분할 수 있음.

- req.on('data', callback)
    - 요청의 본문에 들어있는 데이터를 꺼내는 작업.
    - req, res 는 내부적으로 스트림으로 되어있기에 요청/응답의 데이터가 스트림 형식으로 전달.
    - 또 .on 에서 알수 있듯이 이벤트도 달려있음.
    - 이때 받은 데이터는 문자열이므로 JSON 형식으로 만드는 JSON.parse 과정이 필요하다.
</pre></table></code></div></div><h3 id="42-기타">4.2 기타</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>- res.end 를 한다고 함수가 끝나지 않는다. 따라서 중간에 끝내야할땐 return res.end() 를 한다.
</pre></table></code></div></div><h2 id="43-쿠키와-세션-이해하기">4.3 쿠키와 세션 이해하기</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>- 클라이언트가 누구인지 구분하기위해, 서버는 응답을 할 때 쿠키를 생성하여 같이 보냄.
- 쿠키는 유효기간이 있으며, 단순한 키-값 쌍임.
- 서버로부터 쿠키가 오면 브라우저는 저장해뒀다가 다음에 요청을 보낼때 쿠키도 함께 보냄.
- 서버는 동봉된 쿠키를 보고 누구인지 파악함.

- req.headers.cookie 에 쿠키가 들어있음.
- res.writeHead(200, {'Set-Cookie':'mycookie=test'; Expires= ${expires.toGMTString()}; HttpOnly; Path=/`,});
    - 쿠키 작성해서 보내는 법은 이렇게. 옵션사이는 ; 로 구분
    - Expires 옵션으로 언제 삭제할지 설정가능. 기본은 클라이언트가 종료될때까지.
    - HttpOnly 옵션 : 자바스크립트에서 접근할 수 없도록 함.
    - Path=URL : 쿠키가 전송될 URL을 특정. 기본은 /. 모든 URL에서 전송가능.
    - Max-age=초 : 날짜대신 초를 입력할 수 있음.
    - Secure : HTTPS 일 경우에만 쿠키를 전송함.
    - Domain=도메인명 : 쿠키가 전송될 도메인을 특정

- 세션 : 서버에 사용자 정보를 저장하고, 클라이언트와는 세션 아이디로만 소통함.
    - 쿠키에 세션 아이디를 저장하고, 그 세션 아이디로 서버에 있는 정보를 접근하는 것.
    - 꼭 쿠키를 쓰지 않아도 되는데, 대부분은 쿠키가 간단해서 쿠키를 쓴다. 이를 세션 쿠키라고 함.
</pre></table></code></div></div><h3 id="43-기타">4.3 기타</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>- url 모듈
    - url.parse(req.url) : 요청 url을 파스함
- qs.parse(query) : 쿼리를 파스하여 JSON 형태로 바꿔줌.
- encodeURIComponent() : 헤더에는 한글을 설정할 수 없으므로, 인코딩하는 메소드
</pre></table></code></div></div><h2 id="44-https와-http2">4.4 https와 http2</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>- https : 웹 서버에 SSL 암호화를 추가합니다.
    - GET이나 POST 요청을 할 때 오가는 데이터를 암호화해서 중간에 다른 사람이 요청을 가로채더라도 내용을 확인할 수 없게함.
    - 인증서를 인증기관에서 구입해야 사용가능.(Let's Encrypt 같은 기관에서 무료로 발급)
    - 인증서가 있다면 다음과 같이
</pre></table></code></div></div><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">https</span>
  <span class="p">.</span><span class="nf">createServer</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">cert</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">readFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">도메인 인증서 경로</span><span class="dl">"</span><span class="p">),</span>
      <span class="na">key</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">readFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">도메인 비밀키 경로</span><span class="dl">"</span><span class="p">),</span>
      <span class="na">ca</span><span class="p">:</span> <span class="p">[</span>
        <span class="nx">fs</span><span class="p">.</span><span class="nf">readFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">상위 인증서 경로</span><span class="dl">"</span><span class="p">),</span>
        <span class="nx">fs</span><span class="p">.</span><span class="nf">readFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">상위 인증서 경로</span><span class="dl">"</span><span class="p">),</span>
      <span class="p">],</span>
    <span class="p">},</span>
    <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text/html; charset=utf-8</span><span class="dl">"</span> <span class="p">});</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;h1&gt;Hello Node!&lt;/h1&gt;</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nf">end</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;p&gt;Hello Server!&lt;/p&gt;</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">)</span>
  <span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="mi">443</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">443번 포트에서 서버 대기 중입니다!</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>- http2 : SSL 암호화와 더불어 최신 HTTP 프로토콜인 http/2 를 사용할 수 있게함.
    - 기존 1.1 보다 요청 및 응답 방식이 개선되고, 속도고 많이 개선 됨.
</pre></table></code></div></div><h2 id="45-cluster">4.5 cluster</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>- cluster 모듈 : 기본적으로 싱글 프로세스로 동작하는 노드가 CPU 코어를 모두 사용할 수 잇도록 하는 모듈. 포트를 공유하는 노드 프로세스를 여러 개 둘 수 있어서, 요청이 많이 들어왔을 때 병렬로 실행된 서버의 개수만큼 요청이 분산되게 함.
    -&gt; 스레드가 아니라 프로세스임.

- 단점 : 메모리를 공유하지 못함. / 세션을 메모리에 저장하는 경우 문제가 됨. -&gt; 레디스로 해결

- 마스터 프로세스 : 요청이 들어오면, 만들어진 워커 프로세스에 요청을 분배함.
- 워커 프로세스 : 실질적인 일을 하는 프로세스

- 실무에서는 pm2 등의 모듈로 cluster를 처리함.
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/study/'>study</a>, <a href='/categories/node/'>node</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=노드 스터디 4장 - 디피의 개발일지&url=https://seongil-shin.github.io/posts/node_ch4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=노드 스터디 4장 - 디피의 개발일지&u=https://seongil-shin.github.io/posts/node_ch4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=노드 스터디 4장 - 디피의 개발일지&url=https://seongil-shin.github.io/posts/node_ch4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/You-don't-know-JS-Yet-1%EC%9E%A5-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">You don't know JS Yet - 1장 자바스크립트</a><li><a href="/posts/why-nextjs-sucks/">why-nextjs-sucks</a><li><a href="/posts/the-state-of-es5-on-the-web/">the state of es5 on the web</a><li><a href="/posts/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%9D%98-%EB%87%8C-3%EC%9E%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EB%AC%B8%EB%B2%95-%EB%B9%A0%EB%A5%B4%EA%B2%8C-%EB%B0%B0%EC%9A%B0%EA%B8%B0/">프로그래머의 뇌 3장 프로그래밍 문법 빠르게 배우기</a><li><a href="/posts/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%9D%98-%EB%87%8C-4%EC%9E%A5-%EB%B3%B5%EC%9E%A1%ED%95%9C-%EC%BD%94%EB%93%9C-%EC%9D%BD%EB%8A%94-%EB%B0%A9%EB%B2%95/">프로그래머의 뇌 4장 복잡한 코드 읽는 방법</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/study/">#study</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/next-js/">next.js</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/java/">java</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/node_ch3/"><div class="card-body"> <span class="timeago small" > Apr 29, 2021 <i class="unloaded">2021-04-29T14:07:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>노드 스터디 3장</h3><div class="text-muted small"><p> Node 3장 REPL 사용하기 노드 콘솔은 REPL이라하는데 이유는 Read : 입력한 코드를 읽고 Eval : 해석하고 Print : 결과물을 반환하고 Loop : 종료할 때가지 반복함. 터미널에 node를 입력함으로서 접속가능 간단한 명령어 수행 JS...</p></div></div></a></div><div class="card"> <a href="/posts/node_ch5/"><div class="card-body"> <span class="timeago small" > Apr 29, 2021 <i class="unloaded">2021-04-29T18:07:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>노드 스터디 5장</h3><div class="text-muted small"><p> 패키지매지저 package.json 설치한 패키지의 버전 관리 노드 프로젝트를 시작하기 전에 무조건 package.json부터 만들고 시작해야함. npm init 으로 프로젝트 생성하면 만들어짐. scripts npm 명령어를 저장해두는 부분. 저장된 명령어를 npm run 으로 실행한다. ...</p></div></div></a></div><div class="card"> <a href="/posts/node_ch6/"><div class="card-body"> <span class="timeago small" > May 6, 2021 <i class="unloaded">2021-05-06T16:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>노드 스터디 6장</h3><div class="text-muted small"><p> Express 로 웹서버 만들기 6.1 익스프레스 프로젝트 시작 1 2 3 4 5 6 7 8 9 10 11 12 const express = require("express"); const app = express(); app.set("port", process.env.PORT || 3000); app.get("/", (req, res) =&...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/8980/" class="btn btn-outline-primary" prompt="Older"><p>8980 택배</p></a> <a href="/posts/node_ch6/" class="btn btn-outline-primary" prompt="Newer"><p>노드 스터디 6장</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//.disqus.com/embed.js', disqusConfig: function() { this.page.title = '노드 스터디 4장'; this.page.url = 'https://seongil-shin.github.io/posts/node_ch4/'; this.page.identifier = '/posts/node_ch4/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Seongil-Shin">ShinSeongil</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/study/">#study</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/next-js/">next.js</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/db/">db</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/architecture/">architecture</a> <a class="post-tag" href="/tags/java/">java</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://seongil-shin.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
